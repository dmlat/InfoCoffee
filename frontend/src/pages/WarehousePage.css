/* frontend/src/pages/WarehousePage.css */

/* --- Общие контейнеры --- */
.warehouse-page {
    display: flex;
    flex-direction: column;
    gap: 8px; /* Уменьшаем основной гэп */
}
.inventory-block { padding: 8px; border-radius: 12px; background: #22262e; }

/* --- Верхняя панель и селектор шага --- */
.warehouse-top-panel {
    display: flex; align-items: center; gap: 12px;
    background: #282c34; padding: 10px; border-radius: 12px;
}
.stand-selector-panel {
    flex-direction: column;
    align-items: stretch; /* Растягиваем дочерние элементы */
    gap: 0px; /* Уменьшаем гэп */
    padding: 0; /* Убираем внутренние отступы */
}
.stand-selector-panel .stand-navigator {
    border-bottom: none;
    border-radius: 12px; /* Скругляем углы как у панели выше */
    padding-top: 4px;    /* Уменьшаем паддинг для высоты */
    padding-bottom: 4px;
}
.stand-selector-title {
    color: #a0b0c8;
    font-size: 0.9em;
    font-weight: 500;
    margin: 0;
    text-align: center; /* Центрируем заголовок */
}

/* Стиль для плейсхолдера, когда стойка не выбрана */
.stand-navigator-placeholder {
    display: flex;
    align-items: center;
    justify-content: center;
    background: #23272f;
    border: 1px solid #3a3e47;
    border-radius: 12px; /* Тоже скругляем */
    color: #e0e0e0;
    cursor: pointer;
    text-align: center;
    transition: background-color 0.2s;
    font-size: 0.9em;
    padding: 6px 16px; /* Такой же паддинг для одинаковой высоты */
}
.stand-navigator-placeholder:hover {
    background-color: #3e67e0;
}

.stock-up-btn {
    flex-grow: 1; /* Растягиваем кнопку */
    width: 100%;
}

/* Контейнер для селектора выносим наверх */
.step-selectors-container {
    padding: 10px;
    margin-bottom: 0; /* Убираем нижние отступы, чтобы гэп контейнера был единственным */
    border-radius: 12px;
    background: #282c34;
}

/* УДАЛЕНО: Старый, специфичный класс для заголовка шагов, т.к. используется унифицированный .panel-header */
/* .steps-header { ... } */

.steps-header-note { /* Новый класс */
    margin: 0;
    font-size: 0.8em; /* Такой же кегль */
    color: #a0b0c8;
}
.step-selector-buttons {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
    margin-top: 8px;
    padding: 0 8px; /* И здесь */
}

/* Стили кнопок шага (как в модалке) */
.step-btn {
    padding: 2px 5px; background: #2e3340; border: 1px solid #3a3e47; color: #a0b0c8;
    border-radius: 6px; cursor: pointer; font-size: 0.8em;
    font-weight: 500; transition: all 0.2s;
}
.step-btn.active { background: #3e67e0; color: white; border-color: #3e67e0; }

/* Блок переключения режимов */
.mode-selector-container {
    background: #282c34;
    padding: 10px;
    border-radius: 12px;
    margin-bottom: 0; /* Убираем нижние отступы, чтобы гэп контейнера был единственным */
}

.mode-selector-buttons {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 8px;
}
.mode-btn {
    padding: 4px 12px;
    background: #22262e;
    border: 1px solid #3a3e47;
    color: #a0b0c8;
    border-radius: 8px;
    cursor: pointer;
    font-size: 0.85em;
    font-weight: 400;
    transition: all 0.2s;
}
.mode-btn:hover {
    border-color: #8ae6ff;
}
.mode-btn.active {
    background: #3e67e0;
    color: white;
    border-color: #3e67e0;
}

/* --- Стили таблицы --- */
.inventory-table {
    display: grid;
    gap: 4px 0;
    align-items: stretch; 
}
/* Режим "Стойка": Название | Ед. | Склад | < | > | Стойка */
.inventory-table.mode-stand {
    grid-template-columns: minmax(0, 1.5fr) auto minmax(0, 1fr) 32px 32px minmax(0, 1fr);
}
/* Режим "Кофемашина": Название | Стойка | < | > | Кофемашина */
.inventory-table.mode-machine {
    grid-template-columns: minmax(0, 1fr) minmax(0, 0.8fr) 28px 28px minmax(0, 1.5fr);
}

/* --- Заголовок таблицы --- */
.inventory-header { display: contents; }
.inventory-header > div {
    font-weight: 600; color: #8ae6ff; font-size: 0.8em;
    padding-top: 8px;
    padding-bottom: 8px; 
    border-bottom: 1px solid #3a3e47;
    display: flex; /* Добавляем для выравнивания */
    align-items: center;
    justify-content: center;
}
.inventory-header .header-merged-stock {
    grid-column: 1 / 3;
}
.inventory-header .header-merged-container {
    grid-column: 3 / 6;
}

/* --- Общий стиль для строк таблицы во всех режимах --- */
.inventory-row, .warehouse-mode-table .inventory-row {
    display: contents; /* Для грид-контейнера */
}
.inventory-row > div {
    font-weight: 500;
    font-size: 0.85em; /* Единый кегль */
}

/* --- Стили таблицы (режимы Стойка и Кофемашина) --- */
/* Режим "Стойка": Название | Ед. | Склад | < | > | Стойка */
.inventory-table.mode-stand {
    grid-template-columns: minmax(0, 1.5fr) auto minmax(0, 1fr) 32px 32px minmax(0, 1fr);
}
/* Режим "Кофемашина": Название | Стойка | < | > | Кофемашина */
.inventory-table.mode-machine {
    grid-template-columns: minmax(0, 1fr) minmax(0, 0.8fr) 28px 28px minmax(0, 1.5fr);
}

/* --- Заголовок таблицы --- */
.inventory-header { display: contents; }
.inventory-header > div {
    font-weight: 600; color: #8ae6ff; font-size: 0.8em;
    padding-top: 8px;
    padding-bottom: 8px; 
    border-bottom: 1px solid #3a3e47;
    display: flex; /* Добавляем для выравнивания */
    align-items: center;
    justify-content: center;
}
.inventory-header .header-merged-stock {
    grid-column: 1 / 3;
}
.inventory-header .header-merged-container {
    grid-column: 3 / 6;
}

/* --- Строки таблицы --- */
.inventory-row {
    display: contents;
}
.inventory-table .inventory-row:nth-of-type(odd) > div {
    background-color: rgba(40, 44, 52, 0.6);
}
.inventory-row > div:first-child { border-radius: 6px 0 0 6px; }
.inventory-row > div:last-child { border-radius: 0 6px 6px 0; }

/* --- Общие стили для ячеек (и в шапке, и в строках) --- */
.inventory-header > div,
.inventory-row > div {
    display: flex;
    align-items: center;
    justify-content: center; /* Выравниваем всё по центру по умолчанию */
    padding: 10px 0; /* Уменьшаем боковые отступы до нуля */
    font-size: 0.8em;
}

/* Применяем толщину только к строкам, не к шапке */
.inventory-row > div {
    font-weight: 500;
}

/* Переопределяем выравнивание для Названия и Ячейки машины */
.inventory-header .item-name-cell, .inventory-row .item-name-cell,
.inventory-header .machine-cell, .inventory-row .machine-cell,
.inventory-header .header-merged-stock { /* Добавляем сюда для выравнивания влево */
    justify-content: flex-start;
    padding-left: 8px;
}

.inventory-header .header-merged-container {
    justify-content: flex-end; /* Выравниваем по правому краю */
    padding-left: 0;
    padding-right: 8px; /* Добавляем отступ справа */
}

/* Стилизуем текст в колонке "Ед." */
.inventory-row .unit-cell {
    color: #6a737c; /* Такой же цвет, как у zero-stock */
    font-weight: 500;
}

/* --- Стрелки --- */
.transfer-arrow {
    background: none; border: none; cursor: pointer;
    font-size: 1.5em; font-weight: 600;
    line-height: 1; transition: opacity 0.2s, transform 0.1s;
}
.transfer-arrow.left { color: #e53935; }
.transfer-arrow.right { color: #43a047; }
.transfer-arrow:disabled { opacity: 0.2; cursor: not-allowed; }
.transfer-arrow:active:not(:disabled) { transform: scale(0.85); }

/* --- Строка с прогресс-баром машины --- */
.inventory-row-machine {
    grid-column: 1 / -1; display: grid;
    grid-template-columns: 30px 1fr 30px;
    gap: 8px; align-items: center; padding: 4px 0;
}

/* --- Прочие стили --- */
.zero-stock { color: #6a737c; }
.loading-cell { background-color: rgba(62, 103, 224, 0.15) !important; }

/* --- Стили для режима "Кофемашина" --- */
.configure-machine-notice {
    display: flex;
    justify-content: space-between;
    align-items: center;
    color: #f44336;
    font-size: 0.9em;
    font-weight: 600;
    cursor: pointer;
    padding: 4px;
    transition: color 0.2s;
}
.configure-machine-notice:hover { color: #ff7975; }
.configure-machine-notice .arrow-icon { 
    font-size: 1.2em; 
    font-weight: 700; /* Делаем стрелку жирнее */
    line-height: 1; 
}

/* ДОБАВЛЕНО: стили для нового прогресс-бара из StandStockTab.css */
.machine-progress-bar-container {
    position: relative;
    height: 24px;
    background-color: #2a2e37;
    border-radius: 5px;
    margin: 0; /* Убираем центрирование */
    width: 100%; /* Растягиваем на всю ширину ячейки */
    overflow: hidden;
    min-width: 100px; /* Уменьшаем минимальную ширину */
}
.machine-progress-fill {
    position: absolute; left: 0; top: 0; bottom: 0;
    background-color: #4caf50;
    border-radius: 5px;
    transition: width 0.3s, background-color 0.3s;
}

.machine-progress-fill.high {
    background-color: #ffd600; /* Желтый */
}

.machine-progress-fill.critical {
    background-color: #f44336; /* Красный */
}

.machine-progress-critical-marker {
    position: absolute; top: 0; bottom: 0;
    width: 2px;
    background-color: #f44336;
    z-index: 1;
}
.machine-progress-text {
    position: absolute; top: 0; left: 0; right: 0; bottom: 0;
    display: flex; justify-content: center; align-items: center;
    font-size: 0.8em; color: white; text-shadow: 1px 1px 1px rgba(0,0,0,0.6);
    font-weight: 600;
}

/* --- Адаптивность (Mobile First) --- */
@media (min-width: 768px) {
    .inventory-block { padding: 16px; }
    .step-selector-buttons { grid-template-columns: repeat(6, 1fr); }
    .inventory-table.mode-stand {
        grid-template-columns: minmax(0, 1.5fr) auto minmax(0, 1fr) 40px 40px minmax(0, 1fr);
        gap: 4px 0;
    }
    .inventory-table.mode-machine {
        grid-template-columns: minmax(0, 1fr) minmax(0, 0.8fr) 32px 32px minmax(0, 1.5fr);
        gap: 4px 0;
    }
    .inventory-header > div, .inventory-row > div { 
        font-size: 0.85em;
    }
    .transfer-arrow {
        width: 32px;
        height: 32px;
        font-size: 1.2em;
    }
    .inventory-row > div {
        padding: 10px 0; /* Убираем боковые отступы и здесь */
    }
    .inventory-row > div.item-name-cell { padding-left: 8px; }
    .inventory-row > div.arrow-cell { padding: 10px 0; }
    .inventory-row > div.machine-cell { padding-right: 8px; }
}

.inventory-row > div.arrow-cell {
    padding: 10px 0; /* Убираем все паддинги */
}

.inventory-row > div.machine-cell {
    padding-right: 8px;
}

/* УНИФИЦИРОВАННЫЙ БЛОК ДЛЯ ВЕРХНИХ ПАНЕЛЕЙ */
.mode-selector-container,
.step-selectors-container {
    background: #282c34;
    padding: 10px;
    border-radius: 12px;
    margin-bottom: 0; 
}

/* УНИФИЦИРОВАННЫЙ ЗАГОЛОВОК ДЛЯ ПАНЕЛЕЙ */
.panel-header {
    display: flex;
    justify-content: space-between;
    align-items: baseline;
    margin-bottom: 8px;
    color: #8ae6ff;
    font-weight: 600;
    font-size: 0.8em;
    padding: 0 8px; /* Добавляем боковые отступы */
}
.panel-header > div:first-child {
    margin: 0; /* Убираем любые отступы у заголовка, чтобы он полностью контролировался padding'ом родителя */
}

/* УДАЛЯЕМ старые, специфичные классы, которые больше не нужны */
/* .mode-selector-title { ... } */
/* .steps-header { ... } */
/* .steps-header-title { ... } */


/* УНИФИЦИРОВАННЫЕ КНОПКИ УПРАВЛЕНИЯ (Режимы и Шаги) */
.control-btn {
    padding: 6px 12px; /* Единый вертикальный паддинг для высоты */
    background: #22262e;
    border: 1px solid #3a3e47;
    color: #a0b0c8;
    border-radius: 8px;
    cursor: pointer;
    font-size: 0.8em; /* Единый кегль */
    font-weight: 500;
    transition: all 0.2s;
    text-align: center;
}
.control-btn:hover { border-color: #8ae6ff; }
.control-btn.active {
    background: #3e67e0;
    color: white;
    border-color: #3e67e0;
}

/* ДОБАВЛЕНО: Специфичный стиль для кнопок шага, чтобы сделать их меньше */
.control-btn.step-btn {
    padding: 2px 8px;
    font-size: 0.75em;
}

/* Специфичные стили для контейнеров кнопок */
.mode-selector-buttons {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 8px;
}
.step-selector-buttons {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
    margin-top: 8px;
    padding: 0 8px;
}
@media (min-width: 768px) {
    .step-selector-buttons { grid-template-columns: repeat(6, 1fr); }
}

/* УДАЛЯЕМ старые, специфичные классы кнопок */
/* .mode-btn { ... } */
/* .step-btn { ... } */

/* --- Стили для режима "Пополнить склад" --- */
.warehouse-mode-table {
    display: grid;
    grid-template-columns: auto auto 1fr auto;
    gap: 4px 0; /* ИСПРАВЛЕНИЕ: Убираем горизонтальный гэп */
    align-items: stretch;
}

.warehouse-mode-table .inventory-row > div {
    padding: 10px 8px; /* ИСПРАВЛЕНИЕ: Добавляем вертикальный паддинг */
}

/* ИСПРАВЛЕНИЕ: Добавляем скругление краев для сплошных строк */
.warehouse-mode-table .inventory-row > div:first-child {
    border-radius: 6px 0 0 6px;
}
.warehouse-mode-table .inventory-row > div:last-child {
    border-radius: 0 6px 6px 0;
}

.warehouse-mode-table .inventory-row:nth-of-type(odd) > div {
    background-color: rgba(40, 44, 52, 0.6);
}
.warehouse-mode-table .item-name-cell {
    justify-content: flex-start;
}
.warehouse-mode-table .stock-cell {
    justify-content: center;
    font-weight: 600; /* Делаем цифры жирнее */
}
.unit-label {
    color: #8a9db8;
    font-size: 0.9em;
    margin-left: 4px;
}
.adjust-cell {
    display: flex;
    align-items: center;
    justify-content: center;
}
.adjust-btn {
    background: none;
    border: none;
    color: #8ae6ff;
    font-size: 1.8em;
    font-weight: 300;
    cursor: pointer;
    line-height: 1;
    padding: 0 4px;
    transition: all 0.2s;
}
.adjust-btn:disabled {
    opacity: 0.2;
    cursor: not-allowed;
}
.adjust-btn:active:not(:disabled) {
    transform: scale(0.85);
}
.loading-cell-row > div {
    background-color: rgba(62, 103, 224, 0.15) !important;
}
.adjust-btn.plus { color: #43a047; }
.adjust-btn.minus { color: #e53935; }